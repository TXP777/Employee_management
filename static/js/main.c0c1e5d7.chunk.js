(this["webpackJsonpemployee-management"]=this["webpackJsonpemployee-management"]||[]).push([[0],{192:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){},270:function(e,t,n){},282:function(e,t,n){},286:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(38),o=n.n(s),c=n(60),i=n(35),l=n(23),d=n.n(l),u=(n(110),n(42)),m=n(32),h=n(7),p=function(e,t){return fetch("users/login",{headers:{"Content-Type":"application/json"},method:"post",body:JSON.stringify({username:e,password:t})}).then((function(e){return e.json()}))},j=n(5),b=Object(a.createContext)(null),y=function(e){var t=localStorage.getItem("token"),n=Object(a.useState)(!1),r=Object(h.a)(n,2),s=r[0],o=r[1],c=Object(a.useState)(t),i=Object(h.a)(c,2),l=i[0],y=i[1],f=Object(a.useState)(""),O=Object(h.a)(f,2),x=O[0],g=O[1],S=function(){var e=Object(m.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t,n);case 2:(a=e.sent).token?(r=a.token,localStorage.setItem("token",r),y(r),o(!0),g(t)):u.b.error("Wrong username or password!");case 4:case"end":return e.stop()}var r}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(j.jsx)(b.Provider,{value:{isAuthenticated:s,authenticate:S,userName:x,authToken:l},children:e.children})},f=(n(65),n(29)),O=(n(163),n(75)),x=(n(111),n(46)),g=(n(73),n(31)),S=n(288),w=n(289),_=(n(192),n.p+"static/media/logo.80da78a9.jpg"),C=function(e){var t=Object(a.useContext)(b),n=Object(a.useState)(""),r=Object(h.a)(n,2),s=r[0],o=r[1],c=Object(a.useState)(""),l=Object(h.a)(c,2),u=l[0],p=l[1],y=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.authenticate(s,u);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=(e.location.state||{from:{pathname:"/"}}).from;return!0===t.isAuthenticated?Object(j.jsx)(i.a,{to:C}):Object(j.jsxs)("div",{className:"login",children:[Object(j.jsxs)("header",{className:"login-header",children:[Object(j.jsx)("img",{src:_,alt:"logo"}),Object(j.jsx)("h1",{children:"Enterprise Management System"})]}),Object(j.jsxs)("section",{className:"login-content",children:[Object(j.jsx)("h2",{children:"Login"}),Object(j.jsxs)(x.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:y,children:[Object(j.jsx)(x.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"},{min:2,message:"User name at least 2 digits!"},{max:12,message:"User name up to 12 digits!"},{pattern:/^[a-zA-Z0-9_]+$/,message:"Username must be in English, composed of numbers or underscores!"}],children:Object(j.jsx)(g.a,{prefix:Object(j.jsx)(S.a,{className:"site-form-item-icon"}),onChange:function(e){o(e.target.value)},placeholder:"Username"})}),Object(j.jsx)(x.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"},{min:2,message:"Password at least 2 digits!"},{max:12,message:"Password up to 12 digits!"},{pattern:/^[a-zA-Z0-9_]+$/,message:"Password must be in English, composed of numbers or underscores!"},{}],children:Object(j.jsx)(g.a,{prefix:Object(j.jsx)(w.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password",onChange:function(e){p(e.target.value)}})}),Object(j.jsx)(x.a.Item,{children:Object(j.jsx)(x.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:Object(j.jsx)(O.a,{children:"Remember me"})})}),Object(j.jsx)(x.a.Item,{children:Object(j.jsx)(f.a,{type:"primary",htmlType:"submit",className:"login-form-button",onCilck:function(){t.authenticate(s,u)},children:"Log in"})})]})]})]})},v=n(10),k=n(11),E=n(13),P=n(12),T=(n(264),n(97)),I=(n(266),n(49)),U=(n(268),n(290)),N=I.a.SubMenu,A=function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"left-nav",children:[Object(j.jsxs)(c.b,{to:"/",className:"left-nav-header",children:[Object(j.jsx)("img",{src:_,alt:"logo"}),Object(j.jsx)("h1",{children:"Enterprise Management System"})]}),Object(j.jsxs)(I.a,{mode:"inline",theme:"dark",children:[Object(j.jsx)(I.a.Item,{icon:Object(j.jsx)(U.a,{}),children:Object(j.jsx)(c.b,{to:"/home",children:"Home"})},"1"),Object(j.jsx)(N,{icon:Object(j.jsx)(U.a,{}),title:"Employee Management",children:Object(j.jsx)(I.a.Item,{children:Object(j.jsx)(c.b,{to:"./employee",children:"Employee Information"})},"2")},"sub1"),Object(j.jsx)(N,{icon:Object(j.jsx)(U.a,{}),title:"Attendance Management",children:Object(j.jsx)(I.a.Item,{children:Object(j.jsx)(c.b,{to:"./attendance",children:"Attendance Information"})},"3")},"sub2"),Object(j.jsx)(N,{icon:Object(j.jsx)(U.a,{}),title:"System Management",children:Object(j.jsx)(I.a.Item,{children:Object(j.jsx)(c.b,{to:"/system",children:"System Information"})},"4")},"sub3")]})]})}}]),n}(a.Component),V=(n(269),function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"header",children:[Object(j.jsxs)("div",{className:"header-top",children:[Object(j.jsx)("span",{children:"Welcome,admin!"}),Object(j.jsx)("a",{href:"/login",children:"Log Out"})]}),Object(j.jsxs)("div",{className:"header-bottom",children:[Object(j.jsx)("div",{className:"header-bottom-left",children:"Home Page"}),Object(j.jsxs)("div",{className:"header-bottom-right",children:[Object(j.jsx)("span",{children:"2020-2-3"}),Object(j.jsx)("img",{src:" ",alt:" "}),Object(j.jsx)("span",{children:"sunny"})]})]})]})}}]),n}(a.Component)),q=(n(270),function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"home",children:"Welcome to the enterprise management system!"})}}]),n}(a.Component)),R=(n(157),n(92)),F=(n(156),n(91)),D=(n(154),n(96)),M=(n(155),n(63)),W=n(1),z=n(90),K=n.n(z),J=n(141),L=x.a.Item,H=function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e.onValuesChange=function(t){e.setState(t)},e.addAttendance=function(){return e.state},e}return Object(k.a)(n,[{key:"render",value:function(){var e=this.props.attendance;return Object(j.jsxs)(x.a,Object(W.a)(Object(W.a)({},{labelCol:{span:6},wrapperCol:{span:10}}),{},{onValuesChange:this.onValuesChange,children:[Object(j.jsx)(L,{label:"Attendance_id",name:"attendance_id",rules:[{required:!0,message:"The Attendance ID must be entered!!"}],initialValue:e.attendance_id,children:Object(j.jsx)(g.a,{placeholder:"Please enter your attendance_id"})}),Object(j.jsx)(L,{label:"Employee_id",name:"employee_id",rules:[{required:!0,message:"The employee's id must be entered!!"}],initialValue:e.employee_id,children:Object(j.jsx)(g.a,{placeholder:"Please enter your id"})}),Object(j.jsx)(L,{label:"Employee_name",name:"employee_name",rules:[{required:!0,message:"The employee name must be entered!!"}],initialValue:e.employee_name,children:Object(j.jsx)(g.a,{placeholder:"Please enter your name"})}),Object(j.jsx)(L,{label:"Department_id",name:"department_id",rules:[{required:!0,message:"The employee's department id number must be entered!!"}],initialValue:e.department_id,children:Object(j.jsx)(g.a,{placeholder:"Please enter your department id"})}),Object(j.jsx)(L,{label:"Working Time",name:"workingtime",rules:[{required:!0,message:"The working Time must be entered!!"}],initialValue:e.workingtime,children:Object(j.jsx)(g.a,{placeholder:"Please enter working Time"})}),Object(j.jsx)(L,{label:"Offworktime",name:"offworktime",rules:[{required:!0,message:"The offworktime must be entered!!"}],initialValue:e.offworktime,children:Object(j.jsx)(g.a,{placeholder:"Please enter the offworktime"})}),Object(j.jsx)(L,{label:"Number of late and leave early",name:"numberoflateandleaveearly",rules:[{required:!0,message:"This recording must be entered!!"}],initialValue:e.numberoflateandleaveearly,children:Object(j.jsx)(g.a,{placeholder:"Please enter the number"})})]}))}}]),n}(a.PureComponent),B=(n(282),function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){return Object(j.jsx)("button",Object(W.a)(Object(W.a)({},this.props),{},{className:"link-button"}))}}]),n}(a.Component)),Z=function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).initColumns=function(){a.columns=[Object(W.a)({title:"Attendance_id",dataIndex:"attendance_id",key:"attendance_id"},a.getColumnSearchProps("attendance_id")),Object(W.a)({title:"Employee_id",dataIndex:"employee_id",key:"employee_id"},a.getColumnSearchProps("employee_id")),Object(W.a)({title:"Employee_name",dataIndex:"employee_name",key:"employee_name"},a.getColumnSearchProps("employee_name")),Object(W.a)({title:"Department_id",dataIndex:"department_id",key:"department_id"},a.getColumnSearchProps("department_id")),Object(W.a)({title:"Working Time",dataIndex:"workingtime",key:"workingtime"},a.getColumnSearchProps("workingtime")),Object(W.a)({title:"Off Work Time",dataIndex:"offworktime",key:"offworktime"},a.getColumnSearchProps("offworktime")),Object(W.a)({title:"Number of late and leave early",dataIndex:"numberoflateandleaveearly",key:"numberoflateandleaveearly"},a.getColumnSearchProps("numberoflateandleaveearly")),{title:"Operation",render:function(e){return Object(j.jsx)(B,{onClick:function(){return a.deleteAttendance(e)},children:"Delete"})}}]},a.getAttendance=Object(m.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("attendance",{headers:{"Content-Type":"application/json"},method:"get"}).then((function(e){return e.json()}));case 2:(t=e.sent)&&(n=t,a.setState({attendances:n}));case 4:case"end":return e.stop()}}),e)}))),a.addAttendances=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.att.current.addAttendance(),a.state.attendance.attendance_id&&(t.attendance_id=a.state.attendance.attendance_id),e.next=4,n=t.attendance_id,r=t.employee_id,s=t.employee_name,o=t.department_id,c=t.workingtime,i=t.offworktime,l=t.numberoflateandleaveearly,fetch("attendance/addAttendance",{headers:{"Content-Type":"application/json"},method:"post",body:JSON.stringify({attendance_id:n,employee_id:r,employee_name:s,department_id:o,workingtime:c,offworktime:i,numberoflateandleaveearly:l})}).then((function(e){return e.json()}));case 4:e.sent?(u.b.success("The record is added successfully!"),a.getAttendance(),a.setState({showStatus:0})):u.b.error("Record modification failed!");case 6:case"end":return e.stop()}var n,r,s,o,c,i,l}),e)}))),a.deleteAttendance=function(e){M.a.confirm({title:"Are you sure to delete ".concat(e.employee_name,"?"),onOk:function(){var t=Object(m.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n=e.attendance_id,fetch("attendance/".concat(n,"/delete"),{headers:{"Content-Type":"application/json"},method:"delete",body:JSON.stringify({attendance_id:n})}).then((function(e){return e.json()}));case 2:t.sent?(u.b.success("The recording deleted successfully!!"),a.getAttendance(),a.setState({showStatus:0})):u.b.error("Failed to delete this recording!!");case 4:case"end":return t.stop()}var n}),t)})));return function(){return t.apply(this,arguments)}}()})},a.showUpdate=function(e){a.setState({attendance:e}),a.setState({showStatus:1})},a.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,s=t.confirm,o=t.clearFilters;return Object(j.jsxs)("div",{style:{padding:8},children:[Object(j.jsx)(g.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(r,s,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(j.jsxs)(D.b,{children:[Object(j.jsx)(f.a,{type:"primary",onClick:function(){return a.handleSearch(r,s,e)},icon:Object(j.jsx)(J.a,{}),size:"small",style:{width:90},children:"Search"}),Object(j.jsx)(f.a,{onClick:function(){return a.handleReset(o)},size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:function(e){return Object(j.jsx)(J.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return a.searchInput.select()}),100)},render:function(t){return a.state.searchedColumn===e?Object(j.jsx)(K.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:t?t.toString():""}):t}}},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.handleCancel=function(){a.setState({showStatus:0})},a.att=r.a.createRef(),a.state={attendances:[],attendance:{},searchText:"",searchedColumn:"",showStatus:0},a}return Object(k.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getAttendance()}},{key:"render",value:function(){var e=this,t=this.state,n=t.attendances,a=t.showStatus,r=Object(j.jsx)("span",{children:Object(j.jsx)(f.a,{type:"primary",onClick:function(){e.setState({showStatus:1,attendance:{}})},children:"Create New Recording"})});return Object(j.jsxs)(R.a,{title:r,children:[Object(j.jsx)(F.a,{bordered:!0,rowKey:"attendance_id",dataSource:n,columns:this.columns,pagination:{defaultPageSize:5}}),Object(j.jsx)(M.a,{title:"Add New Recording",visible:1===a,onOk:this.addAttendances,onCancel:this.handleCancel,destroyOnClose:!0,children:Object(j.jsx)(H,{ref:this.att,attendance:this.state.attendance})})]})}}]),n}(a.Component),$=x.a.Item,G=function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e.onValuesChange=function(t){e.setState(t)},e.addOrUpdateEmployee=function(){return e.state},e}return Object(k.a)(n,[{key:"render",value:function(){var e=this.props.employee;return Object(j.jsxs)(x.a,Object(W.a)(Object(W.a)({},{labelCol:{span:6},wrapperCol:{span:10}}),{},{onValuesChange:this.onValuesChange,children:[Object(j.jsx)($,{label:"Employee_id",name:"Employee_id",rules:[{required:!0,message:"The employee ID must be entered!!"}],initialValue:e.employee_id,children:Object(j.jsx)(g.a,{placeholder:"Please enter your Id"})}),Object(j.jsx)($,{label:"Employee_name",name:"Employee_name",rules:[{required:!0,message:"The employee name must be entered!!"}],initialValue:e.employee_name,children:Object(j.jsx)(g.a,{placeholder:"Please enter your name"})}),Object(j.jsx)($,{label:"Employee_gender",name:"Employee_gender",rules:[{required:!0,message:"The employee's gender must be entered!!"}],initialValue:e.employee_gender,children:Object(j.jsx)(g.a,{placeholder:"Please enter your gender"})}),Object(j.jsx)($,{label:"Employee_phone",name:"Employee_phone",rules:[{required:!0,message:"The employee's phone number must be entered!!"}],initialValue:e.employee_phone,children:Object(j.jsx)(g.a,{placeholder:"Please enter your phone number"})}),Object(j.jsx)($,{label:"Employee_address",name:"Employee_address",rules:[{required:!0,message:"The employee's address must be entered!!"}],initialValue:e.employee_address,children:Object(j.jsx)(g.a,{placeholder:"Please enter your address"})})]}))}}]),n}(a.PureComponent),Q=function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).initColumns=function(){a.columns=[Object(W.a)({title:"Employee_id",dataIndex:"employee_id",key:"employee_id"},a.getColumnSearchProps("employee_id")),Object(W.a)({title:"Employee_name",dataIndex:"employee_name",key:"employee_name"},a.getColumnSearchProps("employee_name")),Object(W.a)({title:"Employee_gender",dataIndex:"employee_gender",key:"employee_gender"},a.getColumnSearchProps("employee_gender")),Object(W.a)({title:"Employee_qualification",dataIndex:"employee_qualification",key:"employee_qualification"},a.getColumnSearchProps("employee_qualification")),Object(W.a)({title:"Employee_phone",dataIndex:"employee_phone",key:"employee_phone"},a.getColumnSearchProps("employee_phone")),Object(W.a)({title:"Employee_address",dataIndex:"employee_address",key:"employee_adress"},a.getColumnSearchProps("employee_address")),{title:"Operation",render:function(e){return Object(j.jsxs)("span",{children:[Object(j.jsx)(B,{onClick:function(){return a.showUpdate(e)},children:"Edit"}),Object(j.jsx)(B,{onClick:function(){return a.deleteEmployee(e)},children:"Delete"})]})}}]},a.getEmployees=Object(m.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("employee",{headers:{"Content-Type":"application/json"},method:"get"}).then((function(e){return e.json()}));case 2:(t=e.sent)&&(n=t,a.setState({employees:n}));case 4:case"end":return e.stop()}}),e)}))),a.deleteEmployee=function(e){M.a.confirm({title:"Are you sure to delete ".concat(e.employee_name,"?"),onOk:function(){var t=Object(m.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n=e.employee_id,fetch("employee/".concat(n,"/delete"),{headers:{"Content-Type":"application/json"},method:"delete",body:JSON.stringify({employee_id:n})}).then((function(e){return e.json()}));case 2:t.sent?(u.b.success("Employee deleted successfully!!"),a.getEmployees(),a.setState({showStatus:0})):u.b.error("Failed to delete employee!!");case 4:case"end":return t.stop()}var n}),t)})));return function(){return t.apply(this,arguments)}}()})},a.addOrUpdateEmployees=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.em.current.addOrUpdateEmployee(),a.state.employee.employee_id&&(t.employee_id=a.state.employee.employee_id),e.next=4,n=t.employee_id,r=t.employee_name,s=t.employee_gender,o=t.employee_phone,c=t.employee_address,fetch("employee/addEmployee",{headers:{"Content-Type":"application/json"},method:"post",body:JSON.stringify({employee_id:n,employee_name:r,employee_gender:s,employee_phone:o,employee_address:c})}).then((function(e){return e.json()}));case 4:e.sent?(u.b.success("Update Completed!"),a.getEmployees(),a.setState({showStatus:0})):u.b.error("Update Failed!");case 6:case"end":return e.stop()}var n,r,s,o,c}),e)}))),a.showUpdate=function(e){a.setState({employee:e}),a.setState({showStatus:1})},a.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,s=t.confirm,o=t.clearFilters;return Object(j.jsxs)("div",{style:{padding:8},children:[Object(j.jsx)(g.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(r,s,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(j.jsxs)(D.b,{children:[Object(j.jsx)(f.a,{type:"primary",onClick:function(){return a.handleSearch(r,s,e)},icon:Object(j.jsx)(J.a,{}),size:"small",style:{width:90},children:"Search"}),Object(j.jsx)(f.a,{onClick:function(){return a.handleReset(o)},size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:function(e){return Object(j.jsx)(J.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return a.searchInput.select()}),100)},render:function(t){return a.state.searchedColumn===e?Object(j.jsx)(K.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:t?t.toString():""}):t}}},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.handleCancel=function(){a.setState({showStatus:0})},a.em=r.a.createRef(),a.state={employees:[],employee:{},searchText:"",searchedColumn:"",showStatus:0},a}return Object(k.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getEmployees()}},{key:"render",value:function(){var e=this,t=this.state,n=t.employees,a=t.showStatus,r=Object(j.jsx)("span",{children:Object(j.jsx)(f.a,{type:"primary",onClick:function(){e.setState({showStatus:1,employee:{}})},children:"Create Employee"})});return Object(j.jsxs)(R.a,{title:r,children:[Object(j.jsx)(F.a,{bordered:!0,rowKey:"employee_id",dataSource:n,columns:this.columns,pagination:{defaultPageSize:5}}),Object(j.jsx)(M.a,{title:this.state.employee.employee_id?"Edit Employee's Information":"Create new Employee",visible:1===a,onOk:this.addOrUpdateEmployees,onCancel:this.handleCancel,destroyOnClose:!0,children:Object(j.jsx)(G,{ref:this.em,employee:this.state.employee})})]})}}]),n}(a.Component),X=x.a.Item,Y=function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(){var e;Object(v.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e.onValuesChange=function(t){e.setState(t)},e.addOrUpdateUser=function(){return e.state},e}return Object(k.a)(n,[{key:"render",value:function(){var e=this.props.user;return Object(j.jsxs)(x.a,Object(W.a)(Object(W.a)({},{labelCol:{span:4},wrapperCol:{span:10}}),{},{onValuesChange:this.onValuesChange,children:[Object(j.jsx)(X,{label:"Username",name:"username",rules:[{required:!0,message:"The username must be enter!"}],initialValue:e.username,children:Object(j.jsx)(g.a,{placeholder:"Please enter the username"})}),Object(j.jsx)(X,{label:"Password",name:"password",rules:[{required:!0,message:"The password must be enter!"}],initialValue:e.password,children:Object(j.jsx)(g.a,{type:"password",placeholder:"Please enter your password"})}),Object(j.jsx)(X,{label:"Employee_id",name:"employee_id",rules:[{required:!0,message:"The employee_id must be enter!"}],initialValue:e.employee_id,children:Object(j.jsx)(g.a,{placeholder:"Please enter your employee_id"})})]}))}}]),n}(a.PureComponent),ee=function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).initColumns=function(){a.columns=[Object(W.a)({title:"UserId",dataIndex:"user_id",key:"user_id",width:"15%"},a.getColumnSearchProps("user_id")),Object(W.a)({title:"Username",dataIndex:"username",key:"username",width:"20%"},a.getColumnSearchProps("username")),Object(W.a)({title:"Password",dataIndex:"password",key:"password",width:"20%"},a.getColumnSearchProps("password")),Object(W.a)({title:"EmployeeId",dataIndex:"employee_id",key:"employee_id",width:"15%"},a.getColumnSearchProps("employee_id")),{title:"Operation",render:function(e){return Object(j.jsxs)("span",{children:[Object(j.jsx)(B,{onClick:function(){return a.showUpdate(e)},children:"Edit"}),"\xa0\xa0",Object(j.jsx)(B,{onClick:function(){return a.deleteUser(e)},children:"Delete"})]})}}]},a.onRow=function(e){return{onClick:function(t){a.setState({user:e})}}},a.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,s=t.confirm,o=t.clearFilters;return Object(j.jsxs)("div",{style:{padding:8},children:[Object(j.jsx)(g.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(r,s,e)},style:{width:188,marginBottom:8,display:"block"}}),Object(j.jsxs)(D.b,{children:[Object(j.jsx)(f.a,{type:"primary",onClick:function(){return a.handleSearch(r,s,e)},icon:Object(j.jsx)(J.a,{}),size:"small",style:{width:90},children:"Search"}),Object(j.jsx)(f.a,{onClick:function(){return a.handleReset(o)},size:"small",style:{width:90},children:"Reset"})]})]})},filterIcon:function(e){return Object(j.jsx)(J.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return a.searchInput.select()}),100)},render:function(t){return a.state.searchedColumn===e?Object(j.jsx)(K.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:t?t.toString():""}):t}}},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.getUsers=Object(m.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("users",{headers:{"Content-Type":"application/json"},method:"get"}).then((function(e){return e.json()}));case 2:t=e.sent,console.log(t),t&&(n=t,a.setState({users:n}));case 5:case"end":return e.stop()}}),e)}))),a.deleteUser=function(e){M.a.confirm({title:"Are you sure to delete ".concat(e.username,"?"),onOk:function(){var t=Object(m.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n=e.user_id,fetch("users/".concat(n,"/delete"),{headers:{"Content-Type":"application/json"},method:"delete",body:JSON.stringify({user_id:n})}).then((function(e){return e.json()}));case 2:t.sent?(u.b.success("User deleted successfully!!"),a.getUsers(),a.setState({showStatus:0})):u.b.error("Failed to delete user!!");case 4:case"end":return t.stop()}var n}),t)})));return function(){return t.apply(this,arguments)}}()})},a.addOrUpdateUsers=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=a.us.current.addOrUpdateUser()).createtime=Date.now(),a.state.user.user_id&&(t.user_id=a.state.user.user_id),e.next=5,n=t.user_id,r=void 0,s=void 0,o=void 0,fetch("users/register",{headers:{"Content-Type":"application/json"},method:"post",body:JSON.stringify({user_id:n,employee_id:r,username:s,password:o})}).then((function(e){return e.json()}));case 5:e.sent?(u.b.success("The information has been modified successfully!"),a.getUsers(),a.setState({showStatus:0})):u.b.error("The information modification failed!");case 7:case"end":return e.stop()}var n,r,s,o}),e)}))),a.showUpdate=function(e){a.setState({user:e}),a.setState({showStatus:1})},a.handleCancel=function(){a.setState({showStatus:0})},a.us=r.a.createRef(),a.state={users:[],user:{},searchText:"",searchedColumn:"",showStatus:0},a}return Object(k.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.initColumns()}},{key:"componentDidMount",value:function(){this.getUsers()}},{key:"render",value:function(){var e=this,t=this.state,n=t.users,a=t.user,r=t.showStatus,s=Object(j.jsxs)("span",{children:[Object(j.jsx)(f.a,{type:"primary",onClick:function(){e.setState({showStatus:1,user:{}})},children:"Create User"})," \xa0\xa0",Object(j.jsx)(f.a,{type:"primary",disabled:!a.user_id,children:"Set User Permissions"})]});return Object(j.jsxs)(R.a,{title:s,children:[Object(j.jsx)(F.a,{rowKey:"user_id",pagination:{pageSize:5},columns:this.columns,dataSource:n,rowSelection:{type:"radio",selectedRowKeys:[a.user_id],onSelect:function(t){e.setState({user:t})}},bordered:!0}),Object(j.jsx)(M.a,{title:this.state.user.user_id?"Edit User":"Create User",visible:1===r,onOk:this.updateUsers,onCancel:this.handleCancel,destroyOnClose:!0,children:Object(j.jsx)(Y,{ref:this.us,user:this.state.user})})]})}}]),n}(a.Component),te=T.a.Footer,ne=T.a.Sider,ae=T.a.Content,re=function(e){Object(E.a)(n,e);var t=Object(P.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){return Object(j.jsxs)(T.a,{style:{height:"100%"},children:[Object(j.jsx)(ne,{children:Object(j.jsx)(A,{})}),Object(j.jsxs)(T.a,{children:[Object(j.jsx)(V,{children:"Header"}),Object(j.jsx)(ae,{style:{margin:20,backgroundColor:"#fff"},children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{path:"/home",component:q}),Object(j.jsx)(i.b,{path:"/attendance",component:Z}),Object(j.jsx)(i.b,{path:"/employee",component:Q}),Object(j.jsx)(i.b,{path:"/system",component:ee}),Object(j.jsx)(i.a,{to:"/home"})]})}),Object(j.jsx)(te,{children:"Enterprise employee management system based on React+Antd"})]})]})}}]),n}(a.Component),se=function(){return Object(j.jsx)(c.a,{children:Object(j.jsx)(y,{children:Object(j.jsxs)(i.d,{children:[" ",Object(j.jsx)(i.b,{path:"/login",component:C}),Object(j.jsx)(i.b,{path:"/",component:re})]})})})};o.a.render(Object(j.jsx)(se,{}),document.getElementById("root"))}},[[286,1,2]]]);
//# sourceMappingURL=main.c0c1e5d7.chunk.js.map